package com.dev.air.module.impl.exploit;

import com.dev.air.event.impl.update.PreUpdateEvent;
import com.dev.air.module.api.Category;
import com.dev.air.module.api.Module;
import com.dev.air.module.api.annotation.ModuleInfo;
import com.dev.air.util.packet.PacketUtil;
import com.dev.air.value.impl.ModeValue;
import com.dev.air.value.impl.NumberValue;
import net.lenni0451.asmevents.event.Target;
import net.minecraft.item.ItemBow;
import net.minecraft.item.ItemFood;
import net.minecraft.network.play.client.C03PacketPlayer;

@ModuleInfo(name = "FastUse", description = "Use item a lot faster", category = Category.EXPLOIT, key = 0)
public class FastUseMod extends Module {

    private ModeValue mode = new ModeValue("Mode", "Grim", "Classic", "Grim");
    public NumberValue speed = new NumberValue("Speed", 20, 1,1, 100);

    @Target
    public void onPreUpdate(PreUpdateEvent event) {
        if(mc.player.getHeldItem() == null || !(mc.player.getHeldItem().getItem() instanceof ItemFood) &&
                !(mc.player.getHeldItem().getItem() instanceof ItemBow)) return;

        if (mode.is("Classic")) {
            for (int i = 0; i < speed.getValue(); i++) {
                PacketUtil.sendNo(new C03PacketPlayer(mc.player.onGround));
            }
        } else {
            for (int i = 0; i < speed.getValue(); i++) {
                PacketUtil.sendNo(new C03PacketPlayer.C06PacketPlayerPosLook(mc.player.posX, mc.player.posY, mc.player.posZ, mc.player.renderYawHead,
                        mc.player.renderPitchHead, mc.player.onGround));
            }
        }
    }

}
